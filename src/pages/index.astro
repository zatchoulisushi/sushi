---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import MenuGrid from '../components/MenuGrid.astro';
import Features from '../components/Features.astro';
import Footer from '../components/Footer.astro';
import ProductModal from '../components/products/ProductModal.astro';
import { getCategories, getProductsWithVariants } from '../lib/content-data';

// Load data at build time via Content Layer with fallbacks
const categories = await getCategories();
const productsWithVariants = await getProductsWithVariants();
---

<Layout>
	<Header />
	<main>
		<Hero />
		<MenuGrid categories={categories} products={productsWithVariants} />
		<Features />
	</main>
	<Footer />
	<ProductModal products={productsWithVariants} />
</Layout>